/*! BC 平台的 vue 组件
 * @author dragon <rongjihuang@gmail.com>
 * @version v0.6.1 2017-02-13
 * @license Apache License 2.0
 * @components bc-theme
 *             bc-button
 *             bc-button-set
 *             bc-search
 *             bc-toolbar
 *             bc-table-col
 *             bc-page-bar
 *             bc-loading
 *             bc-grid
 */
define("bc/vue/theme",["jquery","vue"],function(e,t){"use strict";var i={UNIT_EM:{UNIT:"em",SIZE:1,STEP:.1,MIN:.1,MAX:4},UNIT_PX:{UNIT:"px",SIZE:16,STEP:1,MIN:1,MAX:64}};return t.component("bc-theme",{template:'<div class="ui-widget-content" style="margin:0.2em;padding:0.2em;font-size:16px;position:absolute;right:1em;top:0">字体大小：<input type="number" min="{{min}}" max="{{max}}" step="{{step}}" v-model="size"  style="width:3em"/><label><input type="radio" value="em" v-model="unit">em</label><label><input type="radio" value="px" v-model="unit">px</label></div>',replace:!0,props:{size:{type:Number,required:!1,"default":i.UNIT_EM.SIZE},unit:{type:String,required:!1,"default":i.UNIT_EM.UNIT}},created:function(){this.initByUnit(this.unit),this.fontSize!=i.UNIT_EM.SIZE+i.UNIT_EM.UNIT&&this.change()},data:function(){return{min:i.UNIT_EM.MIN,max:i.UNIT_EM.MAX,step:i.UNIT_EM.STEP}},computed:{fontSize:function(){return this.size+this.unit}},watch:{unit:function(e,t){this.initByUnit(e,t)},fontSize:function(){this.change()}},methods:{initByUnit:function(e,t){"em"==e?(this.min=i.UNIT_EM.MIN,this.max=i.UNIT_EM.MAX,this.step=i.UNIT_EM.STEP,t&&(this.size=this.size/16)):(this.min=i.UNIT_PX.MIN,this.max=i.UNIT_PX.MAX,this.step=i.UNIT_PX.STEP,t&&(this.size=16*this.size))},change:function(){document.body.style.fontSize=this.size+this.unit,this.$nextTick(function(){this.$dispatch("change-font-size",this.size,this.unit)})}}})}),define("bc/vue/button",["jquery","vue"],function(e,t){"use strict";return t.component("bc-button",{template:'<button class="bc-vue-button ui-button ui-widget ui-state-default ui-corner-all" style="font-family:inherit" type="button" :class="btnClass"><span class="ui-button-icon-primary ui-icon" v-if="iconClass" :class="iconClass"></span><span class="ui-button-text">{{text}}<slot></slot></span></button>',replace:!0,props:{text:{type:String,required:!1,"default":"　"},iconClass:{type:String,required:!1}},computed:{btnClass:function(){var e,t=this.text&&"　"!=this.text;return e=t&&this.iconClass?"ui-button-text-icon-primary":!t&&this.iconClass?"ui-button-icon-only":(t&&!this.iconClass,"ui-button-text-only")}},ready:function(){var t=e(this.$el);t.on({mouseover:function(){e(this).addClass("ui-state-hover")},mouseout:function(){e(this).removeClass("ui-state-hover")}})},beforeDestroy:function(){e(this.$el).off()},methods:{}})}),define("bc/vue/button-set",["jquery","vue"],function(e,t){"use strict";return t.component("bc-button-set",{template:'<div class="bc-vue-button-set ui-buttonset" style="display:inline-block"><div v-for="i in items" data-id="{{i.hasOwnProperty(\'id\') ? i.id : $index}}" class="ui-button ui-widget ui-state-default ui-button-text-only" style="font-family:inherit;font-size:1em" :class="{\'ui-corner-left\': $index == 0, \'ui-corner-right\': $index == items.length - 1, \'ui-state-active\': isActive(i)}" :style="{\'margin-right\': \'-1px\', \'z-index\': value == i.id ? items.length : 0}"><span style="font-size: 1em" class="ui-button-text" @click="clickItem(i, $index)">{{i.label || i}}</span></div></div>',replace:!0,props:{items:{type:Array,required:!0},value:{required:!1,"default":null}},created:function(){if(null===this.value)for(var e=0;e<this.items.length;e++)if(this.items[e].active){this.value=this.items[e].id;break}},watch:{value:function(e,t){this.$dispatch("change",e,t)}},methods:{clickItem:function(e){this.value="object"==typeof e?e.id:e},isActive:function(e){return"object"==typeof e?this.value==e.id:this.value==e}}})}),define("text!bc/vue/search.html",[],function(){return'<div class="bc-vue-search">\r\n	<div class="fuzzy" :style="{\'text-align\': align}">\r\n		<div>\r\n			<span @click.stop="search" class="search ui-icon ui-icon-search" title="执行查询"></span>\r\n			<input debounce="200" @keyup.enter.stop="search" type="text" v-model="value" class="fuzzy ui-widget-content" :placeholder="placeholder" @change.stop>\r\n			<span v-if="advanceConfig" @click.stop="toggleAdvance" class="add ui-icon ui-icon-triangle-1-{{showAdvance ? \'n\' : \'s\'}}" title="{{showAdvance ? \'隐藏高级搜索\' : \'显示高级搜索\'}}"></span>\r\n		</div>\r\n	</div>\r\n	<div class="advance ui-widget-content ui-state-highlight" v-if="showAdvance" :style="advanceStyle">\r\n		<ul class="conditions">\r\n			<li class="condition" v-for="c in displayConditions">\r\n				<div class="label">{{c.label}}</div>\r\n				<div class="value">\r\n					<template v-if="!c.diadic">\r\n						<input v-if="!c.tag || c.tag == \'input\'" debounce="200" type="{{getInputType(c)}}" class="value ui-widget-content" v-model="c.value"\r\n							:step="c.step" :min="c.min" :max="c.max"\r\n							@keyup.enter.stop="search"\r\n							@change.stop="editCondition(\'value\', c)">\r\n						<select v-if="c.tag == \'select\'" class="value ui-widget-content" v-model="c.value"\r\n							@change.stop="editCondition(\'value\', c)">\r\n							<option v-for="option in c.options" v-bind:value="option.hasOwnProperty(\'value\') ? option.value : option">\r\n								{{ option.hasOwnProperty(\'value\') ? option.text : option }}\r\n							</option>\r\n						</select>\r\n					</template>\r\n					<template v-if="c.diadic">\r\n						<div class="left">\r\n							<input v-if="!c.tag || c.tag == \'input\'" debounce="200" type="{{getInputType(c)}}" class="value ui-widget-content" v-model="c.value[0]"\r\n								:step="c.step" :min="c.min" :max="c.max"\r\n								@keyup.enter.stop="search"\r\n								@change.stop="editCondition(\'value\', c)">\r\n							<select v-if="c.tag == \'select\'" class="value ui-widget-content" v-model="c.value[0]"\r\n								@change.stop="editCondition(\'value\', c)">\r\n								<option v-for="option in c.options" v-bind:value="option.hasOwnProperty(\'value\') ? option.value : option">\r\n									{{ option.hasOwnProperty(\'value\') ? option.text : option }}\r\n								</option>\r\n							</select>\r\n						</div>\r\n						<div class="center">～</div>\r\n						<div class="right">\r\n							<input v-if="!c.tag || c.tag == \'input\'" debounce="200" type="{{getInputType(c)}}" class="value ui-widget-content" v-model="c.value[1]"\r\n								:step="c.step" :min="c.min" :max="c.max"\r\n								@keyup.enter.stop="search"\r\n								@change.stop="editCondition(\'value\', c)">\r\n							<select v-if="c.tag == \'select\'" class="value ui-widget-content" v-model="c.value[1]"\r\n								@change.stop="editCondition(\'value\', c)">\r\n								<option v-for="option in c.options" v-bind:value="option.hasOwnProperty(\'value\') ? option.value : option">\r\n									{{ option.hasOwnProperty(\'value\') ? option.text : option }}\r\n								</option>\r\n							</select>\r\n						</div>\r\n					</template>\r\n				</div>\r\n			</li>\r\n		</ul>\r\n		<div class="operate ui-widget-content">\r\n			<button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" type="button" @click.stop="search">\r\n				<span class="ui-button-icon-primary ui-icon ui-icon-search"></span>\r\n				<span class="ui-button-text">查询</span>\r\n			</button>\r\n			<button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" type="button" @click.stop="clearCondition">\r\n				<span class="ui-button-icon-primary ui-icon ui-icon-minus"></span>\r\n				<span class="ui-button-text">清空</span>\r\n			</button>\r\n			<button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" type="button" @click.stop="showAdvance = false">\r\n				<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span>\r\n				<span class="ui-button-text">关闭</span>\r\n			</button>\r\n		</div>\r\n		<table cellspacing="0" cellpadding="0" style="display:none">\r\n			<tbody>\r\n				<tr v-for="c in displayConditions" class="condition">\r\n					<td class="ui-widget-content">\r\n						<select class="id ui-widget-content" v-model="c.id" @change.stop="editCondition(\'id\', c)">\r\n							<option v-for="cfg in advanceConfig.options" :value="cfg.id">{{cfg.label}}</option>\r\n						</select>\r\n					</td>\r\n					<td class="ui-widget-content" style="max-width:7em">\r\n						<select class="operator ui-widget-content" v-model="c.operator" @change.stop="editCondition(\'operator\', c)">\r\n							<option v-for="o in operators(c.id)" :value="o.id">{{o.label}}</option>\r\n						</select>\r\n					</td>\r\n					<td class="ui-widget-content">\r\n						<input v-if="!c.tag || c.tag == \'input\'" debounce="200" type="{{getInputType(c)}}" class="value ui-widget-content" v-model="c.value"\r\n							:step="c.step" :min="c.min" :max="c.max"\r\n							@keyup.enter.stop="search"\r\n							@change.stop="editCondition(\'value\', c)">\r\n						<select v-if="c.tag == \'select\'" class="value ui-widget-content" v-model="c.value"\r\n							@change.stop="editCondition(\'value\', c)">\r\n							<option v-for="option in c.options" v-bind:value="option.hasOwnProperty(\'value\') ? option.value : option">\r\n								{{ option.hasOwnProperty(\'value\') ? option.text : option }}\r\n							</option>\r\n						</select>\r\n					</td>\r\n					<td class="ui-widget-content">\r\n						<span @click.stop="deleteCondition($index)" class="delete ui-icon ui-icon-minusthick" title="移除此条件"></span>\r\n						<span @click.stop="c.value = \'\'" class="clear ui-icon ui-icon-cancel" title="清空条件值"></span>\r\n					</td>\r\n				</tr>\r\n				<tr class="operate">\r\n					<td class="ui-widget-content" colspan="4">\r\n						<button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" type="button" @click.stop="search">\r\n							<span class="ui-button-icon-primary ui-icon ui-icon-search"></span>\r\n							<span class="ui-button-text">查询</span>\r\n						</button>\r\n						<button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" type="button" @click.stop="clearCondition">\r\n							<span class="ui-button-icon-primary ui-icon ui-icon-minus"></span>\r\n							<span class="ui-button-text">清空</span>\r\n						</button>\r\n						<button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" type="button" @click.stop="addCondition">\r\n							<span class="ui-button-icon-primary ui-icon ui-icon-plus"></span>\r\n							<span class="ui-button-text">添加</span>\r\n						</button>\r\n						<button class="ui-button ui-widget ui-state-default ui-corner-all ui-button-text-icon-primary" type="button" @click.stop="showAdvance = false">\r\n							<span class="ui-button-icon-primary ui-icon ui-icon-closethick"></span>\r\n							<span class="ui-button-text">关闭</span>\r\n						</button>\r\n					</td>\r\n				</tr>\r\n			</tbody>\r\n		</table>\r\n	</div>\r\n</div>'}),define("css!bc/vue/search",[],function(){}),define("bc/vue/search",["vue","text!bc/vue/search.html","css!bc/vue/search"],function(e,t){"use strict";function i(e){return/(^\[\]$)|(^\[\)$)|(^\(\]$)|(^\(\)$)/.test(e)}function n(e){if(e.advanceConfig&&e.advanceConfig.options){e.displayConditions.length=0;var t;e.advanceConfig.options.forEach(function(n){if(n.diadic=i(n.operator),n.value=n.diadic?[]:null,n["default"]!==!1){t={};for(var a in n)t[a]=n[a];e.displayConditions.push(t)}})}}var a="fuzzy";return e.component("bc-search",{template:t,replace:!0,props:{placeholder:{type:String,required:!1},align:{type:String,required:!1,"default":"left"},quick:{type:Boolean,required:!1,"default":!1},value:{type:String,required:!1,"default":""},advanceValue:{type:Array,required:!1},mixValue:{type:Array,required:!1},advanceConfig:{type:[String,Array,Object],required:!1,"default":null}},data:function(){return{displayConditions:[],showAdvance:!1}},computed:{advanceStyle:function(){return this.advanceConfig?{maxHeight:this.advanceConfig.maxHeight,height:this.advanceConfig.height,width:this.advanceConfig.width,maxWidth:this.advanceConfig.maxWidth}:null},fuzzyValueObj:function(){return null!==this.value&&""!==this.value?[a,this.value]:null},advanceValue_:function(){if(!this.advanceConfig)return null;var e,t,i=[];return this.displayConditions.forEach(function(n){n.diadic?(t=[],""!==n.value[0]&&null!==n.value[0]&&void 0!==n.value[0]&&(t[0]=n.value[0]),""!==n.value[1]&&null!==n.value[1]&&void 0!==n.value[1]&&(t[1]=n.value[1]),t.length||(t=null)):t=""!==n.value?n.value:null,n.id&&t&&(e=[n.id,t],n.type&&e.push(n.type),n.operator&&(n.type||e.push(null),e.push(n.operator)),i.push(e))}),i.length?i:null},advanceValueStr:function(){return this.advanceValue_?JSON.stringify(this.advanceValue_):this.advanceValue_},mixValue_:function(){var e;return e=this.advanceValue_?this.fuzzyValueObj?[].concat(this.advanceValue_,[this.fuzzyValueObj]):[].concat(this.advanceValue_):this.fuzzyValueObj?[this.fuzzyValueObj]:null}},created:function(){this.$watch("value",function(){this.change()}),"string"==typeof this.advanceConfig?(this.advanceConfig={url:this.advanceConfig},this.hasAdvance=!0):Array.isArray(this.advanceConfig)?(this.advanceConfig={options:this.advanceConfig},this.hasAdvance=!0):"[object Object]"===Object.prototype.toString.call(this.advanceConfig)?this.hasAdvance=!0:(this.advanceConfig=null,this.hasAdvance=!1),n(this)},watch:{advanceValueStr:function(){this.change()}},ready:function(){$(this.$el).on({mouseover:function(){$(this).addClass("ui-state-hover")},mouseout:function(){$(this).removeClass("ui-state-hover")}},".operate button")},destroyed:function(){console.log("[search] destroyed"),$(this.$el).off()},methods:{toggleAdvance:function(){var e=this;return this.advanceConfig.loading?void 0:this.advanceConfig.options?void(this.showAdvance=!this.showAdvance):this.advanceConfig.url?(e.advanceConfig.loading=!0,void fetch(this.advanceConfig.url,{headers:{"Content-Type":"application/json;charset=utf-8"},credentials:"include"}).then(function(e){return e.ok?e.json():e.text().then(function(e){throw new Error(e)})}).then(function(t){Array.isArray(t)?(e.advanceConfig.options=t,n(e),e.showAdvance=!0):alert("高级搜索异步返回值不是数组格式！options=%s"+JSON.stringify(t)),e.advanceConfig.loading=!1})["catch"](function(t){console.log("[grid] reload error: url=%s, error=%o",e.url,t);var i=t.message||"加载高级搜索配置失败！";window.bc&&bc.msg?bc.msg.alert(i):alert(i),e.advanceConfig.loading=!1})):void alert("缺少高级搜索的 advanceConfig.url 属性配置")},change:function(){this.mixValue=this.mixValue_,this.advanceValue=this.advanceValue_,this.$dispatch("change",this.value,this.advanceValue,this.mixValue),this.quick&&this.$dispatch("search",this.value,this.advanceValue,this.mixValue)},search:function(){this.$dispatch("search",this.value,this.advanceValue_,this.mixValue_)},operators:function(e){var t=[{id:"=",label:"等于"},{id:">=",label:"大于等于"},{id:"<=",label:"小于等于"},{id:">",label:"大于"},{id:"<",label:"小于"},{id:"!=",label:"不等于"}],i=this.getConditionConfig(e);return i&&i.type&&"string"!=i.type||t.push({id:"@",label:"包含"}),t},addCondition:function(){this.displayConditions.push({id:null,operator:"=",value:null,type:null})},deleteCondition:function(e){this.displayConditions.splice(e,1),this.displayConditions.length||(this.showAdvance=!1)},clearCondition:function(){this.displayConditions.forEach(function(e){e.value=e.diadic?[]:null})},getConditionConfig:function(e){if(this.advanceConfig)for(var t=0;t<this.advanceConfig.length;t++)if(this.advanceConfig[t].id==e)return this.advanceConfig[t];return null},editCondition:function(e,t){if("id"==e){t.value=null;var i=this.getConditionConfig(t.id);t.type=i.type}},getInputType:function(e){switch(e.type){case"datetime":return"datetime-local";case"datetime-local":return"datetime-local";case"date":return"date";case"month":return"month";case"time":return"time";case"int":return"number";case"float":return"number";case"double":return"number";case"long":return"long";case"money":return"number";case"number":return"number";default:return"text"}}}})}),define("css!bc/vue/toolbar",[],function(){}),define("bc/vue/toolbar",["vue","css!bc/vue/toolbar"],function(e){"use strict";return e.component("bc-toolbar",{template:'<div class="bc-vue-toolbar ui-widget-content"><slot></slot></div>',replace:!0,props:{}})}),define("bc/vue/table-col",["vue"],function(e){"use strict";return e.component("bc-table-col",{template1:'<colgroup data-rowspan={{rowspan}}><col v-if="addSn" data-id="_sn" style="width:3em"><col v-for="c in columns" data-id="{{c.id}}" :style="{width:c.width}"><col v-if="addEmpty" data-id="_empty" style="width:auto;min-width:1em;"></colgroup>',template:'<colgroup v-if="addSn" data-id="_sn" style="width:3em"></colgroup><colgroup v-for="c in columns" data-id="{{c.id}}" :style="{width:c.width}" span="{{c.children ? c.children.length || 1 : 1}}"><col v-if="c.children" v-for="d in c.children" data-id="{{d.id}}" :style="{width:d.width}"></colgroup><colgroup v-if="addEmpty" data-id="_empty" style="width:auto;min-width:1em;"></colgroup>',replace:!0,props:{columns:{type:Array,required:!0},addSn:{type:Boolean,required:!1,"default":!1},addEmpty:{type:Boolean,required:!1,"default":!1}},computed:{rowspan:function(){for(var e=1,t=0;t<this.columns.length;t++)if(this.columns[t].children&&this.columns[t].children.length){e=2;break}return e}}})}),define("text!bc/vue/page-bar.html",[],function(){return'<ul class="bc-page-bar ui-widget-content ui-widget ui-helper-clearfix">\r\n	<li v-if="refreshable" class="icon ui-state-default ui-corner-all" title="刷新" @click="this.$dispatch(\'change\', \'clickRefresh\', this.pageNo, this.pageSize)">\r\n		<span class="ui-icon ui-icon-refresh"></span>\r\n	</li>\r\n	<template v-if="pageable">\r\n		<li class="icons ui-state-default ui-corner-all">\r\n			<a href="#" class="icon ui-state-default ui-corner-all" @click.prevent.stop="toPage(1)">\r\n				<span class="ui-icon ui-icon-seek-first" title="首页"></span>\r\n			</a>\r\n			<a href="#" class="icon ui-state-default ui-corner-all" @click.prevent.stop="toPage(Math.max((this.pageNo || 1) - 1, 1))">\r\n				<span class="ui-icon ui-icon-seek-prev" title="上一页"></span>\r\n			</a>\r\n			<span class="pageNo">\r\n				<span>{{pageNo || 1}}</span>/<span>{{pageCount}}</span>(<span>{{count}}</span>)\r\n			</span>\r\n			<a href="#" class="icon ui-state-default ui-corner-all" @click.prevent.stop="toPage(Math.min((this.pageNo || 1) + 1, this.pageCount))">\r\n				<span class="ui-icon ui-icon-seek-next" title="下一页"></span>\r\n			</a>\r\n			<a href="#" class="icon ui-state-default ui-corner-all" @click.prevent.stop="toPage(this.pageCount)">\r\n				<span class="ui-icon ui-icon-seek-end" title="尾页"></span>\r\n			</a>\r\n		</li>\r\n		<li class="icons ui-state-default ui-corner-all" title="每页显示的数量">\r\n			<a href="#" v-for="s in pageSizes" class="icon ui-state-default ui-corner-all" :class="{\'ui-state-active\': _pageSize == s}" @click.prevent.stop="changePageSize(s)">\r\n				<span class="pageSize">{{s}}</span>\r\n			</a>\r\n		</li>\r\n	</template>\r\n	<li v-if="exportable" class="icon ui-state-default ui-corner-all" title="导出" @click="this.$dispatch(\'export\', -1)">\r\n		<span class="ui-icon ui-icon-arrowthickstop-1-s"></span>\r\n	</li>\r\n	<li v-if="importable" class="icon ui-state-default ui-corner-all" title="导入" @click="this.$dispatch(\'import\')">\r\n		<span class="ui-icon ui-icon-arrowthickstop-1-n"></span>\r\n	</li>\r\n</ul>'}),define("css!bc/vue/page-bar",[],function(){}),define("bc/vue/page-bar",["jquery","vue","text!bc/vue/page-bar.html","css!bc/vue/page-bar"],function(e,t,i){"use strict";var n=[25,50,100];return t.component("bc-page-bar",{template:i,replace:!0,props:{pageable:{type:Boolean,required:!1,"default":!1},pageNo:{type:Number,required:!1},pageSize:{type:Number,required:!1},pageSizes:{type:Array,required:!1,"default":function(){return n}},count:{type:Number,required:!1,"default":0},refreshable:{type:Boolean,required:!1,"default":!0},exportable:{type:Boolean,required:!1,"default":!1},importable:{type:Boolean,required:!1,"default":!1}},data:function(){return{pageCount:Math.ceil(this.count/(this.pageSize||n[0]))}},computed:{_pageNo:function(){return!this.pageNo||this.pageNo<=0?1:this.pageNo},_pageSize:function(){return this.pageSize||n[0]}},ready:function(){var t=e(this.$el);t.on({mouseover:function(){e(this).addClass("ui-state-hover")},mouseout:function(){e(this).removeClass("ui-state-hover")}},".icon")},beforeDestroy:function(){e(this.$el).off()},watch:{count:function(e){this.pageCount=Math.ceil(e/(this.pageSize||n[0]))}},methods:{toPage:function(e){e=Math.max(1,e)||1,e!=this._pageNo&&(this.pageNo=e,this.$dispatch("change","changePageNo",this.pageNo,this.pageSize))},changePageSize:function(e){e!=this._pageSize&&(this.pageNo=Math.floor((this._pageNo-1)*this._pageSize/e+1),this.pageSize=e,this.pageCount=Math.ceil(this.count/this.pageSize),this.$dispatch("change","changePageSize",this.pageNo,this.pageSize))}}})}),define("css!bc/vue/loading",[],function(){}),define("bc/vue/loading",["vue","css!bc/vue/loading"],function(e){"use strict";return e.component("bc-loading",{template:'<div class="bc-vue-loading-container ui-overlay"><div v-if="maskable" class="mask ui-widget-overlay"></div><div class="actor ui-state-active"'+" :style=\"{'width': size, 'height': size, 'animation-duration': speed, 'margin-top': 'calc('+ size + ' / -2)', 'margin-left': 'calc('+ size + ' / -2)'}\" :class=\"{transparent: transparent}\"></div><div v-if=\"countable\" class=\"counter ui-state-disabled\">{{minutes_}} : {{seconds_}}</div></div>",replace:!0,props:{size:{type:String,required:!1,"default":"4.5em"},speed:{type:String,required:!1,"default":"1s"},maskable:{type:Boolean,required:!1,"default":!0},countable:{type:Boolean,required:!1,"default":!1},transparent:{type:Boolean,required:!1,"default":!0}},data:function(){return{counter:0,minutes:0,seconds:0}},computed:{minutes_:function(){return this.minutes<10?"0"+this.minutes:""+this.minutes},seconds_:function(){return this.seconds<10?"0"+this.seconds:""+this.seconds}},ready:function(){var e=this,t=11;setInterval(function(){e.seconds++,e.seconds==t&&(e.seconds=0,e.minutes++,e.minutes==t&&(e.minutes=0))},1e3)},methods:{reset:function(){this.minutes=0,this.seconds=0}}})}),define("text!bc/vue/grid.html",[],function(){return'<div class="bc-vue-grid ui-widget-content">\r\n	<!-- 顶部扩展区 -->\r\n	<slot name="top"></slot>\r\n\r\n	<!-- 表头 -->\r\n	<table class="head" :style="{width:\'100%\',position:\'relative\',\'user-select\':\'initial\',left:v.scrollLeft + \'px\'}">\r\n		<colgroup v-ref:cols is="bc-table-col" :columns="columns" :add-sn="true" :add-empty="true">\r\n		</colgroup>\r\n		<thead>\r\n			<tr class="main head ui-widget-content">\r\n				<th rowspan="{{headRowspan}}" data-id="_sn" class="sn"><input type="checkbox" v-if="!singleChoice" v-model="v.selectAll" title="{{v.selectAll ? \'点击全部不选择\' : \'点击选择全部\'}}" @change.stop></th>\r\n				<th v-for="c in columns" class="cell text" :class="c.headCellClass" :style="c.headCellStyle" data-id="{{c.id}}" colspan="{{c.children && c.children.length > 0 ? c.children.length : 1}}" rowspan="{{c.children && c.children.length > 0 ? 1 : headRowspan}}">{{c.label}}</th>\r\n				<th rowspan="{{headRowspan}}" data-id="_empty" class="empty"></th>\r\n			</tr>\r\n			<!-- 分组的表头 -->\r\n			<tr class="sub head ui-widget-content" v-if="headRowspan > 1">\r\n				<template v-for="c in columns | filterBy isGroupColumn">\r\n					<th v-for="d in c.children" class="cell text" data-id="{{d.id}}">{{d.label}}</th>\r\n				</template>\r\n			</tr>\r\n		</thead>\r\n	</table>\r\n\r\n	<!-- 数据 -->\r\n	<div class="rows" :style="{overflow:\'auto\',\'user-select\':\'initial\'}" @scroll="v.scrollLeft = -1 * $event.target.scrollLeft">\r\n		<table class="rows" style="width:100%">\r\n			<colgroup is="bc-table-col" :columns="columns" :add-sn="true" :add-empty="true"></colgroup>\r\n			<tbody>\r\n				<tr class="row" v-for="r in rows" data-id="{{r.id}}" class="{{r.class}}" :class="{\'ui-state-highlight\': r.selected, \'ui-widget-content\': true}"\r\n				    :style="(typeof rowStyle == \'function\') ? rowStyle(r) : rowStyle">\r\n					<td class="sn" data-id="_sn"><span v-if="r.selected" class="ui-icon ui-icon-check"></span>{{$index + 1}}</td>\r\n					<template v-for="c in columns">\r\n						<td v-if="isGroupColumn(c)" v-for="d in c.children" class="cell text"\r\n						    :class="(typeof d.rowCellClass == \'function\') ? d.rowCellClass(r[d.id], r, d) : d.rowCellClass"\r\n						    :style="(typeof d.rowCellStyle == \'function\') ? d.rowCellStyle(r[d.id], r, d) : d.rowCellStyle"\r\n						    @click.prevent="rowCellClick(r[d.id], r, d)" :title="rowCellTitle(r[d.id], r, d)">\r\n							<template v-if="d.escape !== false">{{rowCellFilter(r[d.id], r, d)}}</template>\r\n							<template v-if="d.escape === false">{{{rowCellFilter(r[d.id], r, d)}}}</template>\r\n						</td>\r\n						<td v-if="!isGroupColumn(c)" class="cell text"\r\n						    :class="(typeof c.rowCellClass == \'function\') ? c.rowCellClass(r[c.id], r, c) : c.rowCellClass"\r\n						    :style="(typeof c.rowCellStyle == \'function\') ? c.rowCellStyle(r[c.id], r, c) : c.rowCellStyle"\r\n						    @click.prevent="rowCellClick(r[c.id], r, c)" :title="rowCellTitle(r[c.id], r, c)">\r\n							<template v-if="c.escape !== false">{{rowCellFilter(r[c.id], r, c)}}</template>\r\n							<template v-if="c.escape === false">{{{rowCellFilter(r[c.id], r, c)}}}</template>\r\n						</td>\r\n					</template>\r\n					<td class="empty" data-id="_empty"></td>\r\n				</tr>\r\n			</tbody>\r\n		</table>\r\n	</div>\r\n\r\n	<!-- 分页条 -->\r\n	<bc-page-bar v-if="showPageBar" style="border-width: 1px 0 0 0" :pageable="pageable" :page-no.sync="pageNo" :page-size.sync="pageSize" :page-sizes.sync="pageSizes" :count.sync="count" :refreshable="refreshable" :exportable="exportable" :importable="importable" @change="reload">\r\n	</bc-page-bar>\r\n\r\n	<!-- 加载器 -->\r\n	<bc-loading v-ref:loading v-if="v.loading"></bc-loading>\r\n\r\n	<!-- 底部扩展区 -->\r\n	<slot name="bottom"></slot>\r\n</div>'}),define("css!bc/vue/grid",[],function(){}),define("bc/vue/grid",["vue","bc/vue/table-col","bc/vue/page-bar","text!bc/vue/grid.html","css!bc/vue/grid","bc/vue/loading"],function(e,t,i,n){"use strict";var a,o=[25,50,100];return e.component("bc-grid",{template:n,replace:!0,props:{singleChoice:{type:Boolean,required:!1,"default":!1},columns:{type:Array,required:!1,"default":function(){return[]}},rows:{type:Array,required:!1,"default":function(){return[]}},url:{type:String,required:!1},rowStyle:{type:Function,required:!1},query:{required:!1},queryKey:{type:String,required:!1,"default":"query"},method:{type:[String,Function],required:!1},beforeReload:{type:Function,required:!1},showPageBar:{type:Boolean,required:!1,"default":!0},pageable:{type:Boolean,required:!1,"default":!1},pageNo:{type:Number,required:!1},pageSize:{type:Number,required:!1},pageSizes:{type:Array,required:!1,"default":function(){return o}},count:{type:Number,required:!1,"default":0},refreshable:{type:Boolean,required:!1,"default":!0},exportable:{type:Boolean,required:!1,"default":!1},importable:{type:Boolean,required:!1,"default":!1},cellFilter:{type:Function,required:!1},autoLoad:{type:Boolean,required:!1,"default":!0}},computed:{selection:function(){if(!this.singleChoice){for(var e=[],t=0;t<this.rows.length;t++)this.rows[t].selected&&e.push(this.rows[t]);return e}for(var t=0;t<this.rows.length;t++)if(this.rows[t].selected)return this.rows[t]},headRowspan:function(){return this.$refs.cols?this.$refs.cols.rowspan:1}},data:function(){return{v:{scrollLeft:0,loading:!1,selectAll:!1}}},watch:{"v.selectAll":function(e){var t=this;this.rows.forEach(function(i,n){i.hasOwnProperty("selected")?i.selected=e:t.$set("rows["+n+"].selected",e)})}},ready:function(){var e,t,i,n=$(this.$el),a=this;n.on({mouseover:function(){$(this).addClass("ui-state-hover")},mouseout:function(){$(this).removeClass("ui-state-hover")},click:function(){e&&clearTimeout(t),e=!0;var n=this.rowIndex;t=setTimeout(function(){if(e=!1,i)return void(i=!1);if(a.singleChoice)for(var t=0;t<a.rows.length;t++)t!=n&&a.rows[t].selected&&(a.rows[t].selected=!1);var o=a.rows[n];o.hasOwnProperty("selected")?a.rows[n].selected=!a.rows[n].selected:a.$set("rows["+n+"].selected",!0),e=!1},200)},dblclick:function(){i=!0,a.$dispatch("dblclick-row",a.rows[this.rowIndex],this.rowIndex)}},"tr.row"),this.autoLoad&&this.reload()},methods:{changePageBar:function(){this.reload()},reload:function(){if(this.url){this.v.loading=!0;var e={};if(this.pageable&&(this.pageNo&&(e.pageNo=this.pageNo),this.pageSize&&(e.pageSize=this.pageSize)),this.query)if(Array.isArray(this.query))e[this.queryKey]=JSON.stringify(this.query);else if("object"==typeof this.query){var t=this.query;Object.keys(t).forEach(function(i){var n=t[i],a=typeof n;null!==n&&""!==n&&"undefined"!==a&&(e[i]=n)})}else"string"==typeof this.query&&(e[this.queryKey]=this.query);var i=this,n=this.url,a={method:"function"==typeof this.method?this.method():this.method||"GET",credentials:"include"};if("POST"==a.method)a.headers={"Content-Type":"application/json;charset=utf-8"},a.body=JSON.stringify(e);else if("GET"==a.method){var o=[];Object.keys(e).forEach(function(t){o.push(t+"="+e[t])}),o.length&&(n+="?"+o.join("&"))}return this.beforeReload&&this.beforeReload(a)===!1?void(i.v.loading=!1):void fetch(n,a).then(function(e){return e.ok?e.json():e.text().then(function(e){throw new Error(e)})}).then(function(e){e.columns&&i.$set("columns",e.columns),e.rows&&i.$set("rows",e.rows),i.pageable&&(e.pageNo&&i.$set("pageNo",e.pageNo),e.pageSize&&i.$set("pageSize",e.pageSize),e.pageSizes&&i.$set("pageSizes",e.pageSizes),e.count&&i.$set("count",e.count)),i.showPageBar&&(e.hasOwnProperty("refreshable")&&i.$set("refreshable",e.refreshable),e.hasOwnProperty("exportable")&&i.$set("exportable",e.exportable),e.hasOwnProperty("importable")&&i.$set("importable",e.importable)),e.hasOwnProperty("singleChoice")&&i.$set("singleChoice",e.singleChoice),i.$dispatch("after-reload",e),i.v.loading=!1})["catch"](function(e){console.log("[grid] reload error: url=%s, error=%o",i.url,e);var t=e.message||"[grid] 数据加载失败！";bc.msg?bc.msg.alert(t):alert(t),i.v.loading=!1})}},isGroupColumn:function(e){return!(!e.children||!e.children.length)},rowCellFilter:function(t,i,n){if(!n.filter)return t;if("string"==typeof n.filter){var a=n.filter.split(" "),o=e.filter(a[0]);o||console.error("filter '%s' not found (column=%s)",a[0],n.id);var r=a.slice(1);return r.unshift(t),o.apply(this,r)}return"function"==typeof n.filter?n.filter(t,i,n):void 0},rowCellTitle:function(e,t,i){return i.title?"function"==typeof i.title?i.title(e,t,i):e:void 0},rowCellClick:function(e,t,i){i.rowCellClick&&i.rowCellClick(e,t,i)},getExportForm:function(){return a||(a=$('<form name="bc-vue-grid-exporter" method="get" style="display:none"></form>')[0]),a}}})}),define("bc/vue/components",["bc/vue/theme","bc/vue/button","bc/vue/button-set","bc/vue/search","bc/vue/toolbar","bc/vue/table-col","bc/vue/page-bar","bc/vue/loading","bc/vue/grid"],function(){return 0}),function(e){var t=document,i="appendChild",n="styleSheet",a=t.createElement("style");a.type="text/css",t.getElementsByTagName("head")[0][i](a),a[n]?a[n].cssText=e:a[i](t.createTextNode(e))}(".bc-vue-search{position:relative;display:inline-block;}.bc-vue-search > .fuzzy > div{display:inline-block;position:relative;}.bc-vue-search > .fuzzy .search{position:absolute;top:50%;margin-top:-8px;left:2px;cursor:pointer;}.bc-vue-search > .fuzzy input.fuzzy{box-sizing:border-box;padding:.34em 18px;width:12em;font-family:inherit;font-size:1em;}.bc-vue-search > .fuzzy .add{position:absolute;top:50%;margin-top:-8px;right:2px;cursor:pointer;}.bc-vue-search > .advance{position:relative;margin-top:-2px;background-image:none;z-index:90;overflow:auto;display:flex;flex-direction:column;}.bc-vue-search > .advance > .conditions{border-collapse:collapse;margin:0;padding:0;list-style:none;overflow:auto;flex-grow:1;min-width:20em;}.bc-vue-search .operate{padding:0.4em;border-width:1px 0 0 0;}.bc-vue-search .condition{margin:0.4em;}.bc-vue-search .condition .label{font-weight:bold;}.bc-vue-search .condition .value{position:relative;display:flex;flex-direction:row;}.bc-vue-search .condition .value > div{display:inline-block;}.bc-vue-search .condition .value > div.left,.bc-vue-search .condition .value > div.right{flex-grow:1;background-color:gray;}.bc-vue-search .condition .value input,.bc-vue-search .condition .value select{box-sizing:border-box;min-width:9em;width:100%;padding:.34em 0 .34em .34em;font-family:inherit;font-size:1em;}.bc-vue-search .condition .value input{padding-left:calc(0.34em + 4px);}.bc-vue-search .condition .value .left,.bc-vue-search .condition .value .right{position:relative;}.bc-vue-search .operate button{font-family:inherit;}.bc-vue-toolbar{position:relative;padding:0;min-height:2.2em;word-spacing:-0.4em;font-weight:normal;}.bc-vue-toolbar > *{word-spacing:normal;font-family:inherit;font-size:1em;margin:0.2em;}.bc-vue-toolbar > .bc-vue-search{position:absolute;top:0.05em;right:0.06em;}.bc-vue-toolbar > .bc-vue-search:first-child{position:relative;margin-left:0.3em;}.bc-page-bar{clear:both;display:block;margin:0;padding:0;}.bc-page-bar li{list-style:none;cursor:default;position:relative;margin:0.2em;padding:4px 0;float:left;}.bc-page-bar .icon{cursor:pointer;}.bc-page-bar li span.ui-icon{float:left;margin:0 4px;}.bc-page-bar .icons{padding:2px 2px;}.bc-page-bar .icons a.icon{margin:0;border:0;}.bc-page-bar .icons span.ui-icon{margin:2px;}.bc-page-bar li span.pageNo,.bc-page-bar li span.pageSize{float:left;height:16px;font-size:12px;}.bc-page-bar li span.pageNo{margin:2px 4px;cursor:default;}.bc-page-bar li span.pageSize{margin:2px 4px;}.bc-page-bar li a{float:left;display:block;}.bc-vue-loading-container{position:absolute;top:0;left:0;width:100%;height:100%;}.bc-vue-loading-container > .counter,.bc-vue-loading-container > .actor{position:absolute;box-sizing:border-box;top:50%;left:50%;}.bc-vue-loading-container > .counter{width:6em;height:2em;line-height:2em;text-align:center;margin:-1em auto auto -3em;border:none;background:none;}.bc-vue-loading-container > .actor{opacity:0.8;width:3.5em;height:3.5em;margin:-1.75em auto auto -1.75em;border-width:0.5em;border-radius:50%;border-left-color:transparent;border-right-color:transparent;animation:bc-vue-loading-spin 1000ms infinite linear;}.bc-vue-loading-container > .actor.transparent{background:none;}@keyframes bc-vue-loading-spin{100%{transform:rotate(360deg);transform:rotate(360deg);}}.bc-page > .bc-vue-grid,.bc-vue-grid.fillup{position:absolute;top:0;bottom:0;left:0;right:0;overflow:hidden;}.bc-page > .bc-vue-grid,.bc-vue-grid.noborder{border-width:0;}.bc-vue-grid.border{border-width:1px;}.bc-vue-grid > .bc-vue-toolbar{border-width:0 0 1px 0;}.bc-vue-grid{display:flex;flex-direction:column;overflow:hidden;box-sizing:border-box;position:relative;font-weight:normal;}.bc-vue-grid > *{flex:none;}.bc-vue-grid > div.rows{flex:1 1 0%;}.bc-vue-grid table.head,.bc-vue-grid table.rows{table-layout:fixed;border-collapse:collapse;}.bc-vue-grid table.rows{margin-bottom:-1px;}.bc-vue-grid tr.head > th{font-weight:inherit;}.bc-vue-grid tr.head,.bc-vue-grid tr.row{height:2em;}.bc-vue-grid td.cell{text-align:left;white-space:normal;word-wrap:break-word;word-break:break-all;}.bc-vue-grid td.sn{text-align:center;cursor:default;}.bc-vue-grid td.sn > .ui-icon-check{display:inline-block;}.bc-vue-grid tr.main.head,.bc-vue-grid tr.row{border-width:1px 0 1px 0;}.bc-vue-grid tr.main.head:first-child,.bc-vue-grid tr.row:first-child,.bc-vue-grid tr.main.head:first-child > th,.bc-vue-grid tr.row:first-child > td{border-top:none;}.bc-vue-grid tr.main.head >:first-child,.bc-vue-grid tr.row >:first-child{border-left:none;}.bc-vue-grid tr.main.head >:last-child,.bc-vue-grid tr.row >:last-child{border-right:none;}.bc-vue-grid tr.head > *,.bc-vue-grid tr.row > *{padding:0;border-width:1px;border-color:inherit;border-style:inherit;}.bc-vue-grid td.cell.text,.bc-vue-grid th.cell.text{padding:0 0.4em;}.bc-vue-grid td.cell.text.ellipsis,.bc-vue-grid th.cell.text.ellipsis{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}");

//# sourceMappingURL=components.min.js.map